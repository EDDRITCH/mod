# Scripted by Mechano for use in determining valid targets for sporradic conflicts in events/Warcreation

# Protected nations that will not get involved in random conflicts, makes sure that nations or even regions are considerably more stable.
is_protected_lore_faction = {
	OR = {
		tag = CES
		tag = NCR
		tag = BOS
		tag = VEG
		tag = DES
		tag = NEW
		tag = KHA
		tag = FIE
		tag = VIP
		tag = DAM
		tag = MOJ
		tag = ASH
		tag = HOP
		tag = NCN
		has_country_flag = random_war_protected
	}
}

elgible_wargoal_sender = {
	NOT = {
		surrender_progress > 0.1
	}
	is_ai = yes
	has_war = no
	is_protected_lore_faction = no
	is_in_faction = no
	has_capitulated = no
	exists = yes
}
elgible_wargoal_receiver = {
	OR = {
		has_war = no
		AND = {
				is_ai = no # is meaner to players, so if they are fighting an offensive war and and winning they can still get a claim put on them
				has_defensive_war = no
				NOT = {
					surrender_progress > 0.1
				}
		}
	}
	OR = {
		NOT = { # people ideology will not start wars with each other unless they strongly hate them
			AND = {
				has_government = people
				ROOT = { has_government = people }
			}
		}
		ROOT = {has_opinion = { target = PREV value < -120 }}
	}
	# considers strength ratios, invading someone who has more troops is generally a bad idea
	OR = {
		AND = {
			has_war = yes
			any_enemy_country = {
				strength_ratio = { tag = PREV ratio > 1.0 }
			}
		}
		ROOT = { strength_ratio = { tag = PREV ratio > 1.0}}
	}
	is_protected_lore_faction = no
	exists = yes
	has_capitulated = no
	ROOT = {has_opinion = { target = PREV value < 30 }} # will not start wars with countries they like
}
